define("filter_edusharing/edu",["exports","./repository","core/config"],(function(_exports,_repository,_config){var obj;
/**
   * @copyright  metaVentis GmbH â€” http://metaventis.com
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.start=void 0,_config=(obj=_config)&&obj.__esModule?obj:{default:obj};_exports.start=()=>{const allEduSharingObjects=document.querySelectorAll("div[data-type='esObject']"),renderObject=async element=>{const wrapper=element.parentElement,ajaxParams={eduSecuredNodeStructure:{nodeId:element.getAttribute("data-node")}},response=await(0,_repository.getSecuredNode)(ajaxParams).catch((error=>{window.console.error(error)})),serviceWorkerPhp="".concat(_config.default.wwwroot,"/filter/edusharing/getServiceWorker.php"),renderComponent=document.createElement("edu-sharing-render");renderComponent.setAttribute("encoded_node",response.securedNode),renderComponent.setAttribute("signature",response.signature),renderComponent.setAttribute("jwt",response.jwt),renderComponent.setAttribute("render_url",response.renderingBaseUrl),renderComponent.setAttribute("encoded_user",btoa(JSON.stringify({authorityName:"authorName",firstName:"Horst",surName:"Tester",userEMail:"mail@mail.de"}))),renderComponent.setAttribute("service_worker_url",serviceWorkerPhp),wrapper.innerHTML="",wrapper.appendChild(renderComponent)},observer=new IntersectionObserver((async(entries,observer)=>{window.console.log("OBSERVER CALLBACK");for(const entry of entries)window.console.log("ENTRY TO RENDER"),window.console.log(entry.target),await renderObject(entry.target),observer.unobserve(entry.target)}),{root:null,rootMargin:"400px",threshold:0});allEduSharingObjects.forEach((element=>observer.observe(element)))}}));

//# sourceMappingURL=edu.min.js.map