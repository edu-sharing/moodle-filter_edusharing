"use strict";(self.webpackChunkrendering_service=self.webpackChunkrendering_service||[]).push([[383],{383:(M,d,l)=>{l.r(d),l.d(d,{DdbComponent:()=>f});var e=l(3953),_=l(4057),m=l(9213),r=l(8834),u=l(9417),p=l(177);function g(o,a){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275element(1,"img",2),e.\u0275\u0275elementStart(2,"button",3),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.toggleFullscreen())}),e.\u0275\u0275elementStart(3,"mat-icon"),e.\u0275\u0275text(4,"fullscreen"),e.\u0275\u0275elementEnd()()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("src",n.activeObject(),e.\u0275\u0275sanitizeUrl)("alt",(null==n.node?null:n.node.title)||(null==n.node?null:n.node.name)||"")}}let f=(()=>{var o;class a{constructor(t){this.element=t,this.activeObject=(0,e.signal)(void 0)}ngAfterViewInit(){this.loadOptimalSize()}loadOptimalSize(){const t=this.element.nativeElement.getBoundingClientRect();if(void 0!==this.data?.items&&void 0!==this.data?.items[0].additionalData){const i=this.data?.items[0].additionalData,c=Object.keys(i).filter(s=>s.startsWith("size_")).map(s=>i[s]).sort((s,E)=>Math.abs(parseInt(s.split(",")[0])-t.width)>Math.abs(parseInt(E.split(",")[0])-t.width)?1:-1)[0],v=c.split(",")[0],C=c.split(",")[1],b=i.heightPlaceHolder??"",O=(i.linkTemplate??"").replace(i.widthPlaceHolder??"",v).replace(b,C);this.activeObject.set(O)}}toggleFullscreen(){document.fullscreenElement?document.exitFullscreen():this.element.nativeElement.requestFullscreen()}}return(o=a).\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(e.ElementRef))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["rs-module-ddb"]],hostBindings:function(t,i){1&t&&e.\u0275\u0275listener("fullscreenchange",function(){return i.loadOptimalSize()},!1,e.\u0275\u0275resolveDocument)},inputs:{data:"data",node:"node"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:1,vars:1,consts:[["class","ddb-wrapper",4,"ngIf"],[1,"ddb-wrapper"],[3,"src","alt"],["mat-icon-button","",3,"click"]],template:function(t,i){1&t&&e.\u0275\u0275template(0,g,5,2,"div",0),2&t&&e.\u0275\u0275property("ngIf",i.activeObject())},dependencies:[_.RenderingModule,p.NgIf,r.Hl,r.iY,u.YN,m.An],styles:["[_nghost-%COMP%]{position:relative;display:flex;align-items:center}.ddb-wrapper[_ngcontent-%COMP%]{width:100%}.ddb-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;position:relative}.ddb-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;right:0;color:#fff;background-color:#00000080}"]}),a})()}}]);